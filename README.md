# PostSuperman

一个基于Python和PyQt5开发的Postman-like API调试工具，提供直观的图形界面进行HTTP请求测试和API调试。

## 🚀 功能特性

### 核心功能
- **HTTP请求支持**：支持GET、POST、PUT、DELETE、PATCH等所有HTTP方法
- **请求参数管理**：支持URL参数、请求头、请求体的完整配置
- **多种请求体格式**：
  - Raw文本（JSON、XML、Text等）
  - Form-data表单数据
  - x-www-form-urlencoded编码数据
- **响应处理**：格式化显示JSON响应，支持响应头查看
- **语法高亮**：请求和响应编辑器支持语法高亮和行号显示

### 集合管理
- **请求集合**：组织和管理API请求到集合中
- **环境变量**：支持环境配置和变量管理
- **拖拽排序**：支持拖拽重新排序集合和请求
- **右键菜单**：丰富的右键菜单操作

### 导入导出
- **cURL导入**：支持从cURL命令导入请求
- **文件导入**：支持从JSON文件导入请求配置
- **代码生成**：生成cURL命令代码
- **数据导出**：导出请求配置到文件

### 用户体验
- **多标签页**：支持同时打开多个请求进行对比
- **历史记录**：自动保存请求历史
- **快捷键**：支持Ctrl+S等快捷键操作
- **加载动画**：请求发送时显示加载状态
- **错误处理**：友好的错误提示和处理

## 📦 安装和运行

### 环境要求
- Python 3.6.6+
- PyQt5
- requests库

### 开发环境运行
```bash
# 克隆项目
git clone <repository-url>
cd postsuperman

# 创建虚拟环境
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac

# 安装依赖
pip install -r requirements.txt

# 运行应用
python main.py
```

### 打包为可执行文件
```bash
# 运行打包脚本
python build_exe.py

# 生成的exe文件位于 dist/ 目录
# 可以直接运行，无需Python环境
```

## 🖥️ 界面说明

### 主界面布局
```
┌─────────────────────────────────────────────────────────────┐
│ 菜单栏 (File, Edit, View, Help)                           │
├─────────────┬───────────────────────────────────────────────┤
│             │                                               │
│ 集合面板     │              请求编辑区                        │
│             │                                               │
│ - 集合树     │  - 请求方法选择                              │
│ - 请求列表   │  - URL输入框                                 │
│ - 拖拽排序   │  - 参数表格                                  │
│             │  - 请求头表格                                 │
│             │  - 请求体编辑器                               │
│             │                                               │
├─────────────┼───────────────────────────────────────────────┤
│             │                                               │
│             │              响应显示区                        │
│             │                                               │
│             │  - 状态码显示                                 │
│             │  - 响应体格式化                               │
│             │  - 响应头信息                                 │
│             │  - 保存/清除按钮                              │
│             │                                               │
└─────────────┴───────────────────────────────────────────────┘
```

### 主要组件

#### 1. 集合面板 (左侧)
- **集合树**：显示所有集合和请求的层级结构
- **右键菜单**：创建、重命名、删除集合和请求
- **拖拽功能**：支持拖拽重新排序
- **图标标识**：文件夹图标表示集合，文件图标表示请求

#### 2. 请求编辑区 (右上)
- **请求方法**：下拉选择GET、POST、PUT、DELETE等
- **URL输入**：输入完整的请求URL
- **参数表格**：添加URL查询参数
- **请求头表格**：设置HTTP请求头
- **请求体编辑器**：
  - None：无请求体
  - Form-data：表单数据
  - x-www-form-urlencoded：编码表单
  - Raw：原始文本（支持JSON、XML等）

#### 3. 响应显示区 (右下)
- **状态栏**：显示HTTP状态码和响应时间
- **响应体**：格式化的响应内容显示
- **响应头**：显示服务器返回的响应头
- **操作按钮**：
  - Save Response：保存响应到文件
  - Clear Response：清除响应内容
  - Beautify JSON：美化JSON格式

#### 4. 标签页管理
- **多标签**：支持同时打开多个请求
- **标签操作**：右键菜单支持关闭当前、关闭其他、关闭所有
- **未保存提示**：有未保存更改时标签显示星号(*)

## 🔧 使用指南

### 创建第一个请求
1. 右键点击集合树 → "新建请求"
2. 输入请求名称
3. 选择HTTP方法（GET、POST等）
4. 输入目标URL
5. 根据需要添加参数、请求头或请求体
6. 点击"Send"发送请求

### 导入现有请求
1. 点击"Import"按钮
2. 选择导入方式：
   - **cURL命令**：粘贴cURL命令
   - **文件导入**：选择JSON配置文件
3. 选择导入到新请求或覆盖当前请求

### 管理集合
1. **创建集合**：右键 → "新建集合"
2. **重命名**：右键 → "重命名"
3. **删除**：右键 → "删除"
4. **拖拽排序**：直接拖拽重新排序

### 保存和同步
- **自动保存**：请求修改后会自动标记为未保存(*)
- **手动保存**：Ctrl+S或点击Save按钮
- **退出保存**：关闭应用时会提示保存未保存的更改

## 📁 数据存储

应用会在用户数据目录创建以下文件：
- `collections.json`：存储所有集合和请求配置
- `postsuperman.log`：应用运行日志

### 数据目录位置
- **Windows**: `%APPDATA%/postsuperman/`
- **Linux**: `~/.local/share/postsuperman/`
- **macOS**: `~/Library/Application Support/postsuperman/`

## 🛠️ 开发说明

### 项目结构
```
postsuperman/
├── main.py              # 应用入口
├── build_exe.py         # 打包脚本
├── requirements.txt      # 依赖列表
├── README.md           # 项目文档
├── ui/
│   ├── main_window.py   # 主窗口UI
│   ├── app.ico         # 应用图标
│   └── minimal.qss     # 样式文件
└── user-data/          # 用户数据目录
```

### 核心类说明
- `MainWindow`：主窗口类，管理整体UI和业务逻辑
- `RequestEditor`：请求编辑器，处理请求配置
- `CodeEditor`：代码编辑器，支持语法高亮
- `RequestWorker`：请求工作线程，处理HTTP请求
- `RespLoadingOverlay`：响应加载覆盖层

### 打包说明
使用PyInstaller打包为独立可执行文件：
- 自动嵌入应用图标
- 包含所有依赖库
- 支持跨平台部署

## 🐛 故障排除

### 常见问题

**Q: 应用启动失败**
A: 检查Python版本是否为3.6.6+，确保PyQt5正确安装

**Q: 请求发送失败**
A: 检查网络连接，确认URL格式正确，查看日志文件获取详细错误信息

**Q: 数据丢失**
A: 检查用户数据目录权限，确保collections.json文件可写

**Q: 界面显示异常**
A: 尝试重新安装PyQt5，或检查系统显示设置

### 日志查看
应用运行日志保存在`postsuperman.log`文件中，包含：
- 应用启动/关闭记录
- 请求发送记录
- 错误和警告信息
- 数据保存操作

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进项目！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至：[xuzhenkang@hotmail.com]

---

**PostSuperman** - 让API调试更简单！ 